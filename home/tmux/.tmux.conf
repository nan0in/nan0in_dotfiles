# è®¾ç½® tmux é¢œè‰²æ¨¡å¼
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:TC"

# çŠ¶æ€æ ç¾åŒ–
#set -g status-style "bg=#4c566a,fg=#d8dee9"
#setw -g window-status-current-style "fg=black,bg=#e5e9f0"
#set -g pane-active-border-style "fg=#08b472"
#set -g pane-border-style "fg=#32353b"
#####################################################>>>>

     # å¸¸è§„ 

#####################################################>>>>

# yaziå›¾ç‰‡é¢„è§ˆ
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

#####################################################>>>>

     # ä¸»é¢˜ 

#####################################################>>>>
# DRACULAä¸»é¢˜
set -g @dracula-plugins  "ssh-session network cpu-usage battery git cwd"

# æ·»åŠ ipæ˜¾ç¤º 
set -g @dracula-show-network-interfaces true
set -g @dracula-network-show-ip true
set -g @dracula-network-hosts "1.1.1.1 8.8.8.8"
set -g @dracula-network-ethernet-label "ó°ˆ€ Eth"
set -g @dracula-network-offline-label "ó°–ª offline"
set -g @dracula-network-wifi-label "ó°˜Š "

# æ­£å¸¸æ˜¾ç¤ºpowerline
set -g @dracula-show-powerline true
set -g @dracula-show-edge-icons true
set -g @dracula-transparent-powerline-bg true
set -g @dracula-inverse-divider îƒ—
set -g @dracula-cwd-colors "light_purple dark_gray"

# status bar
set -g @dracula-show-flags true
# the default is 5, it can accept any number
set -g @dracula-refresh-rate 5 
set -g @dracula-border-contrast true #é«˜å¯¹æ¯”åº¦çª—æ ¼
set -g @dracula-show-empty-plugins false #éšè—ç©ºæ’ä»¶

# left icons
set -g @dracula-show-left-icon "#h ğŸ®| #S | #W" #host name & session name & current window

# ç”µæ± 
set -g @dracula-battery-label "â™¥ "

# cpu
set -g @dracula-cpu-display-load true
set -g @dracula-cpu-usage-label "ï‹› " # CPU è´Ÿè½½ã€‚å¹³å‡è´Ÿè½½ â€“ æ˜¯åœ¨ç»™å®šçš„ 1ã€5 å’Œ 15 åˆ†é’Ÿçš„æ—¶é—´æ®µå†…è®¡ç®—çš„å¹³å‡ç³»ç»Ÿè´Ÿè½½


# cwd æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•
# set -g @dracula-cwd-max-dirs "0"
# set -g @dracula-cwd-max-chars "0"

# é™„åŠ clientä¿¡æ¯
set -g @dracula-clients-minimum 1 #è®¾ç½®è¦æ˜¾ç¤ºçš„æœ€å°å®¢æˆ·ç«¯æ•°é‡

set -g @dracula-clients-singular client
set -g @dracula-clients-plural clients #ä¸€ä¸ªå®¢æˆ·ç«¯æˆ–å¤šä¸ªå®¢æˆ·ç«¯æ—¶è®¾ç½®æ ‡ç­¾


# ç½‘ç»œä¿¡æ¯
set -g @dracula-network-hosts "1.1.1.1 8.8.8.8"
set -g @dracula-network-ethernet-label "ó°ˆ€ Eth"
set -g @dracula-network-offline-label "ó°–ª offline"
set -g @dracula-network-wifi-label "ó°˜Š "

# ssh-session
set -g @dracula-show-ssh-only-when-connected true #æ²¡è¿æ¥ä¸æ˜¾ç¤º
set -g @dracula-show-ssh-session-port true


# å¤©æ°”,éº»çƒ¦å°±å…³äº†
set -g @dracula-show-fahrenheit false


# æ—¶é—´
set -g @dracula-show-timezone false
set -g @dracula-day-month true
set -g @dracula-military-time true


# æ’ä»¶é¢œè‰²åˆ†é…
# per default available colors: white, gray, dark_gray, light_purple, dark_purple, cyan, green, orange, red, pink, yellow
# set -g @dracula-[plugin-name]-colors "[background] [foreground]"

#####################################################>>>>

     # ä¸ªäººè°ƒé…

#####################################################>>>>

# çŠ¶æ€æ é—´éš”
set -g status-interval 3

# è®©çª—å£ç¼–å·ä»1å¼€å§‹
set -g base-index 1
setw -g pane-base-index 1

# è‡ªåŠ¨é‡å‘½åçª—å£
setw -g automatic-rename on
set -g renumber-windows on

# è®¾ç½®çª—å£æ ‡é¢˜
set -g set-titles on

# çª—å£åˆ‡æ¢åŠ¨ç”»æ—¶é—´
set -g display-panes-time 1000
set -g display-time 1000

# çª—å£ç®¡ç†å¿«æ·é”®
bind -n M-o new-window -c "#{pane_current_path}"
bind -n M-O break-pane
bind -n M-q kill-pane

# çª—å£å¯¼èˆªå¿«æ·é”®
bind -n M-Right next-window
bind -n M-Left previous-window

# é¢æ¿åˆ‡æ¢å¿«æ·é”®
# bind -n M-a select-pane -L
# bind -n M-s select-pane -D
# bind -n M-w select-pane -U
# bind -n M-d select-pane -R
bind > swap-pane -D
bind < swap-pane -U

# æ°´å¹³ & å‚ç›´åˆ†å±
bind v split-window -h -c "#{pane_current_path}"
bind s split-window -v -c "#{pane_current_path}"

# å¯ç”¨ Vim æ¨¡å¼ & é¼ æ ‡æ”¯æŒ
set -g mode-keys vi
set -g mouse on

# å¤åˆ¶æ¨¡å¼å¢å¼ºï¼ˆM-v è¿›å…¥ copy-mode å¹¶é«˜äº®ï¼‰
unbind -n M-v
bind -n M-v copy-mode \; send-keys -X clear-selection \; send-keys -X start-of-line

# å¤åˆ¶å†…å®¹åˆ°ç³»ç»Ÿå‰ªè´´æ¿ï¼ˆéœ€è¦ xclip æˆ– wl-copyï¼‰
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection \; run-shell "tmux save-buffer - | xclip -i -selection clipboard"

# å‰ç¼€prefixä¿®æ”¹
unbind c-b
set -g prefix 'c-s'

#####################################################>>>>

     # æ’ä»¶ 

#####################################################>>>>
# ä½¿ç”¨ tmux-powerline è¿›è¡Œæ›´å¥½çš„çŠ¶æ€æ æ˜¾ç¤º
#set -g @plugin 'erikw/tmux-powerline'
#run-shell ~/.tmux/plugins/tmux-powerline/powerline.conf
run '~/.tmux/plugins/tmux-resurrect/resurrect.tmux'
run '~/.tmux/plugins/dracula/dracula.tmux'
# ä½¿ç”¨ tmux-resurrect è¿›è¡Œä¼šè¯ä¿å­˜å’Œæ¢å¤ï¼ˆéœ€è¦å®‰è£… tmux plugin managerï¼‰
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-fzf'

# æ·»åŠ  tmux-thumbs æ’ä»¶ä»¥ä¾¿å¿«é€Ÿé€‰æ‹©å’Œå¤åˆ¶æ–‡æœ¬
set -g @plugin 'fcsonline/tmux-thumbs'
run-shell ~/.tmux/plugins/tmux-thumbs/tmux-thumbs.tmux
set -g @thumbs-command 'echo -n {} | xclip -sel clip' # Linux å¤åˆ¶åˆ°å‰ªè´´æ¿

# é€‚é…vim 
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

# ä½¿ç”¨ Alt + a/s/w/d æ— ç¼åˆ‡æ¢
bind -n M-a if-shell "$is_vim" "send-keys M-a"  "select-pane -L"
bind -n M-s if-shell "$is_vim" "send-keys M-s"  "select-pane -D"
bind -n M-w if-shell "$is_vim" "send-keys M-w"  "select-pane -U"
bind -n M-d if-shell "$is_vim" "send-keys M-d"  "select-pane -R"

# æ’ä»¶åˆ—è¡¨ä¾ç„¶éœ€è¦åŒ…å«è¿™ä¸ªï¼ˆç”¨äºå¤„ç†åº•å±‚é€»è¾‘ï¼‰
set -g @plugin 'christoomey/vim-tmux-navigator'

set -g @plugin 'dracula/tmux'

set -gq allow-passthrough on 
set -g visual-activity off

run '~/.tmux/plugins/tpm/tpm'

